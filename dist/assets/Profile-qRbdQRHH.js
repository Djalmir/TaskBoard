import{_ as E,o as s,c as M,m as O,u as W,a as H,r as u,b as c,w as r,B as P,d as l,e as _,f as m,I as $,g as S,h as C,i as U,p as B,j as F,k as a,l as G,n as J,q as Q,T as X,t as D,s as V,v as Y,x as Z,F as ee,y as ae,z as T}from"./index-fCEgyX7s.js";import{M as R,d as le,s as oe,P as se}from"./ProfilePictureModal-c5W_4-r2.js";function te(o){o.target.maxLength=15;let d=o.target.value.replace(/\D/g,"").replace(/^(\d{2})(\d)/g,"($1) $2").replace(/(\d{3,5})(\d{3})/,"$1-$2");o.target.value=d}function ne(o){o.target.maxLength=10;let d=o.target.value.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1");o.target.value=d}const ue=["name","value"],re={__name:"Radio",props:{name:{type:String,required:!0},value:{type:[String,Number,Boolean],required:!0}},setup(o){return(d,y)=>(s(),M("input",O({type:"radio",name:o.name,value:o.value,onChange:y[0]||(y[0]=w=>d.$emit("update:modelValue",o.value))},d.$attrs),null,16,ue))}},z=E(re,[["__scopeId","data-v-c94483b9"]]),K=o=>(B("data-v-af7d7e4e"),o=o(),F(),o),ie=K(()=>a("b",{id:"title"},"Excluir conta",-1)),de=K(()=>a("p",null,[a("b",{style:{color:"var(--danger-light)"}},"Atenção:"),a("br"),_(" Esta ação não poderá ser desfeita. ")],-1)),ce=K(()=>a("p",null,[_(" Ao prosseguir, "),a("b",null,"todos"),_(" os seus dados, de "),a("b",null,"todas"),_(" as aplicações da "),a("b",null,"Razion"),_(" serão excluídos. ")],-1)),pe={__name:"AccountDeletionModal",setup(o,{expose:d}){const y=W(),w=H(),h=u(),p=u("");function t(){h.value.show()}function k(){if(!p.value)return C("showMessage",{error:"Informe sua senha."});U.deleteAccount({password:p.value}).then(()=>{y.dispatch("setUserProfile",null),w.replace({name:"Home"}).then(()=>{C("showMessage",{success:"Conta excluída com sucesso!"})})})}function g(){p.value="",h.value.close()}return d({show:t}),(x,i)=>(s(),c(l(R),{ref_key:"modal",ref:h,onClose:g},{header:r(()=>[ie]),footer:r(()=>[m(l(P),{class:"secondary",onClick:g},{default:r(()=>[_("Cancelar")]),_:1}),m(l(P),{type:"submit",class:"danger",onClick:k},{default:r(()=>[_("Deletar minha conta")]),_:1})]),default:r(()=>[de,ce,m(l($),{class:"input",label:"Informe sua senha para prosseguir.",type:"password",modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=v=>p.value=v),onKeypress:S(k,["enter"])},null,8,["modelValue","onKeypress"])]),_:1},512))}},ve=E(pe,[["__scopeId","data-v-af7d7e4e"]]),fe=o=>(B("data-v-2e946b1b"),o=o(),F(),o),me=fe(()=>a("b",null,"Alterar senha",-1)),_e={__name:"PasswordEditionModal",setup(o,{expose:d}){const y=u(),w=u(""),h=u(""),p=u("");function t(){y.value.show()}function k(){if(!w.value||!h.value||!p.value)return C("showMessage",{error:"Preencha todos os campos"});if(h.value!=p.value)return C("showMessage",{error:"As senhas não correspondem"});U.updateProfile({password:w.value,newPassword:h.value}).then(()=>{C("showMessage",{success:"Senha alterada com sucesso!"}),g()})}function g(){w.value="",h.value="",p.value="",y.value.close()}return d({show:t}),(x,i)=>(s(),c(l(R),{ref_key:"modal",ref:y,onClose:g},{header:r(()=>[me]),footer:r(()=>[m(l(P),{class:"secondary",onClick:g},{default:r(()=>[_("Cancelar")]),_:1}),m(l(P),{type:"submit",onClick:k},{default:r(()=>[_("Confirmar")]),_:1})]),default:r(()=>[m(l($),{class:"input",label:"Senha atual",type:"password",modelValue:w.value,"onUpdate:modelValue":i[0]||(i[0]=v=>w.value=v),onKeypress:S(k,["enter"])},null,8,["modelValue","onKeypress"]),m(l($),{class:"input",label:"Nova senha",type:"password",modelValue:h.value,"onUpdate:modelValue":i[1]||(i[1]=v=>h.value=v),onKeypress:S(k,["enter"])},null,8,["modelValue","onKeypress"]),m(l($),{class:"input",label:"Confirmar nova senha",type:"password",modelValue:p.value,"onUpdate:modelValue":i[2]||(i[2]=v=>p.value=v),onKeypress:S(k,["enter"])},null,8,["modelValue","onKeypress"])]),_:1},512))}},ye=E(_e,[["__scopeId","data-v-2e946b1b"]]),I=o=>(B("data-v-fffac3af"),o=o(),F(),o),he={action:"javascript:void(0)"},ke={class:"flexDiv"},ge={id:"pictureInnerWrapper"},we={key:1,class:"info"},be=I(()=>a("b",null,"Nome",-1)),Pe={key:1,class:"info"},Ve=I(()=>a("b",null,"Email",-1)),xe={class:"flexDiv"},Me={key:1,class:"info"},$e=I(()=>a("b",null,"Telefone",-1)),Ce={key:3,class:"info"},Ie=I(()=>a("b",null,"Data de nascimento",-1)),De={class:"flexDiv",style:{"align-items":"flex-end","justify-content":"space-between"}},Se=I(()=>a("legend",null,"Sexo",-1)),Ue={class:"flexDiv"},Ee={key:0,style:{cursor:"pointer"}},Ae=I(()=>a("span",{style:{"padding-left":"7px"}},"Masculino",-1)),Be={key:1,style:{cursor:"pointer"}},Fe=I(()=>a("span",{style:{"padding-left":"7px"}},"Feminino",-1)),Ke={__name:"Profile",setup(o){const d=G(),y=u(),w=u(),h=u(),p=u();J("Dialog").value;const t=u(!1),k=u(""),g=u(""),x=u(""),i=u(""),v=u(""),b=u(""),A=u(!1);Q(()=>{N()});function N(){y.value.value="",U.getProfile().then(f=>{d.dispatch("setUserProfile",{...d.state.userProfile,...f.data}),k.value=f.data.profilePicture,g.value=f.data.name,x.value=f.data.email,i.value=f.data.phone,v.value=le(f.data.birthDate),b.value=f.data.sex})}function j(){const f=document.getElementById("filePicker").files[0];f&&(k.value=URL.createObjectURL(f))}function q(){let f=y.value.files[0],e=new FormData;if(!g.value)return C("showMessage",{error:"O campo nome é obrigatório"});if(e.append("name",g.value),!x.value)return C("showMessage",{error:"O campo email é obrigatório"});e.append("email",x.value),f&&e.append("profilePicture",f),i.value&&e.append("phone",i.value),v.value&&e.append("birthDate",oe(v.value)),b.value&&e.append("sex",b.value),U.updateProfile(e).then(n=>{d.dispatch("setUserProfile",{...d.state.userProfile,...n.data}),C("showMessage",{success:"Informações atualizadas com sucesso!"}),t.value=!1})}function L(){t.value=!1,N()}return(f,e)=>(s(),M(ee,null,[a("section",null,[a("form",he,[a("div",ke,[a("div",{id:"pictureWrapper",onMouseenter:e[2]||(e[2]=n=>A.value=!0),onMouseleave:e[3]||(e[3]=n=>A.value=!1)},[a("input",{type:"file",accept:"image/*",ref_key:"filePicker",ref:y,id:"filePicker",hidden:"",onChange:j},null,544),a("div",ge,[k.value?(s(),c(l(ae),{key:0,src:k.value,alt:"Profile picture",size:4.5,onClick:e[0]||(e[0]=()=>{t.value||p.value.show()})},null,8,["src"])):(s(),c(l(T),{key:1,class:"user",size:4.5}))]),m(X,{name:"grow"},{default:r(()=>[t.value&&A.value?(s(),c(l(P),{key:0,id:"editPictureBt",class:"secondary",onClick:e[1]||(e[1]=n=>y.value.click())},{default:r(()=>[m(l(T),{class:"edit-2",size:1.15})]),_:1})):V("",!0)]),_:1})],32),t.value?(s(),c(l($),{key:0,class:"input",type:"text",label:"Nome",modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=n=>g.value=n),required:""},null,8,["modelValue"])):(s(),M("div",we,[be,a("span",null,D(g.value),1)]))]),t.value?(s(),c(l($),{key:0,class:"input",type:"email",label:"Email",modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=n=>x.value=n),required:""},null,8,["modelValue"])):(s(),M("div",Pe,[Ve,a("span",null,D(x.value),1)])),a("div",xe,[t.value?(s(),c(l($),{key:0,class:"input",type:"text",inputmode:"numeric",label:"Telefone",modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=n=>i.value=n),onInput:l(te)},null,8,["modelValue","onInput"])):(s(),M("div",Me,[$e,a("span",null,D(i.value),1)])),t.value?(s(),c(l($),{key:2,class:"input",type:"text",inputmode:"numeric",label:"Data de nascimento",modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=n=>v.value=n),onInput:l(ne)},null,8,["modelValue","onInput"])):(s(),M("div",Ce,[Ie,a("span",null,D(v.value),1)]))]),a("div",De,[a("fieldset",null,[Se,a("div",Ue,[t.value||b.value=="M"?(s(),M("label",Ee,[t.value?(s(),c(l(z),{key:0,modelValue:b.value,"onUpdate:modelValue":e[8]||(e[8]=n=>b.value=n),name:"sex",value:"M",label:"Masculino",checked:b.value=="M"},null,8,["modelValue","checked"])):V("",!0),Ae])):V("",!0),t.value||b.value=="F"?(s(),M("label",Be,[t.value?(s(),c(l(z),{key:0,modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=n=>b.value=n),name:"sex",value:"F",label:"Feminino",checked:b.value=="F"},null,8,["modelValue","checked"])):V("",!0),Fe])):V("",!0)])])]),Y(m(l(P),{id:"changePasswordBt",class:"danger",onClick:e[10]||(e[10]=n=>w.value.show())},{default:r(()=>[_("Alterar Senha")]),_:1},512),[[Z,t.value]]),a("footer",null,[t.value?V("",!0):(s(),c(l(P),{key:0,class:"danger",onClick:e[11]||(e[11]=n=>h.value.show())},{default:r(()=>[_("Excluir conta")]),_:1})),t.value?V("",!0):(s(),c(l(P),{key:1,class:"primary",onClick:e[12]||(e[12]=n=>t.value=!0)},{default:r(()=>[_("Editar")]),_:1})),t.value?(s(),c(l(P),{key:2,class:"secondary",onClick:L},{default:r(()=>[_("Cancelar")]),_:1})):V("",!0),t.value?(s(),c(l(P),{key:3,type:"submit",onClick:q},{default:r(()=>[_("Salvar")]),_:1})):V("",!0)])])]),m(l(ye),{ref_key:"passwordEditionModal",ref:w},null,512),m(l(ve),{ref_key:"accountDeletionModal",ref:h},null,512),m(l(se),{ref_key:"profilePictureModal",ref:p,src:k.value,alt:"Profile picture"},null,8,["src"])],64))}},ze=E(Ke,[["__scopeId","data-v-fffac3af"]]);export{ze as default};
